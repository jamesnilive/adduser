# This is a template from
# https://salsa.debian.org/salsa-ci-team/pipeline/-/raw/master/recipes/salsa-ci.yml
#
# If this pipeline is not running at after committing and pushing this file,
# ensure that https://salsa.debian.org/%{project_path}/-/settings/ci_cd has in
# field "CI/CD configuration file" filename "debian/salsa-ci.yml".
#
# Feel free disable and enable tests to find a good balance between extensive
# coverage and having a consistently green pipeline where failures are rare
# enough that they are always investigated and addressed. For documeenation
# please read https://salsa.debian.org/salsa-ci-team/pipeline
---
include:
  - https://salsa.debian.org/salsa-ci-team/pipeline/raw/master/recipes/debian.yml

# Install at least one package that uses 'adduser' to detect if it stops working
install-example-dependencies:
  stage: test
  image: debian:sid-slim
  before_script:
  - apt-get update -q
  - apt-get install -q --yes ${WORKING_DIR}/adduser_*.deb
  script:
    - apt-get install -q --yes --no-install-recommends tpm-udev openssh-client
  variables:
    GIT_STRATEGY: none
  needs:
    - job: build
      artifacts: true
